version: "3.8"

services:
  # ================================
  # ğŸ”Œ API PRINCIPAL
  # ================================
  api:
    build: .                          # ConstrÃ³i a imagem a partir do Dockerfile atual
    ports:
      - "3000:3000"                   # Porta externa:interna
    env_file:
      - .env                          # Carrega variÃ¡veis de ambiente do arquivo .env
    depends_on:
      - mongodb                       # Aguarda o MongoDB subir primeiro
    restart: always                   # Reinicia automaticamente em caso de falha
    volumes:
      - ./sessions:/app/sessions      # PersistÃªncia de sessÃµes da API

  # ================================
  # ğŸ—ƒï¸ MONGODB
  # ================================
  mongodb:
    image: mongo:latest               # Imagem oficial do MongoDB
    container_name: mongodb
    ports:
      - "27017:27017"                 # Porta padrÃ£o do MongoDB
    volumes:
      - ./mongo-data:/data/db        # PersistÃªncia dos dados no host
    restart: always                   # Reinicia automaticamente
